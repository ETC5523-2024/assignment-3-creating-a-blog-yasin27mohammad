---
title: "Welcome To My Blog Template"
author: "Mohammad Yasin"
date: "2022-07-18"
categories: [article]
---

## **Problem Description**

::: {style="text-align: justify;"}
The numbat (Myrmecobius fasciatus), a small, termite-eating marsupial, has faced severe population declines throughout its history in Australia. Weighing between 300g and 752g, numbats have a body length of 175mm to 290mm and a tail measuring 120mm to 210mm. Unlike many mammals, numbats do not have proper teeth but instead have blunt “pegs” since they do not chew their food. Their forefeet, which bear five toes, and hind feet, with four toes, are equipped with strong, sharp claws used for digging termites from the soil.

Historically, numbats inhabited semi-arid and arid woodlands with Eucalyptus and Acacia trees, as well as grasslands. Today, they are restricted to eucalypt woodlands at elevations around 317 meters, where they find shelter in hollow logs. These logs not only offer refuge at night but also provide a place to hide from predators during the day, including birds and foxes. Numbats feed primarily on termites, consuming up to 20,000 termites daily, and have evolved specific physical traits to capture their prey efficiently.

Despite conservation efforts, numbats have experienced dramatic declines, leading to their current endangered status. Although the available dataset includes records from as far back as 1856, this report will focus on the period from 2000 to 2023, analyzing population trends within this time frame.
:::


![](numbats.jpg)

## **Data Description**


-  The data used in this report was obtained from the TidyTuesday project, which is a weekly data sharing initiative that provides datasets for analysis and learning. The specific dataset used in this analysis was focused on the numbat population and was accessed via the TidyTuesday GitHub repository.

   We named the data set as **numbats** has 805 observations and 16 variables. The details of the variables are presented in the data dictionary in below @tbl-dictionary :

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(dplyr)
library(ggplot2)
library(lubridate)
library(plotly)
library(galah)
library(tidytuesdayR)
library(knitr)
library(kableExtra)
library(visdat)
library(rnaturalearth)
library(rnoaa)
library(sf)
```


```{r, echo=FALSE,message=FALSE}
numbats <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-03-07/numbats.csv')
```



  
  
```{r, Dictionary}
#| label: tbl-dictionary
#| tbl-cap: "Data Dictionary For Numbats dataset"
#| warning: false
#| message: false
#| echo: false

desc <- tibble(
  variable = c("decimalLatitude", "decimalLongitude", "eventDate", "scientificName", 
               "taxonConceptID", "recordID", "dataResourceName", "year", "month", 
               "wday", "hour", "day", "dryandra", "prcp", "tmax", "tmin"),
  class = c("double", "double", "datetime", "factor", 
            "factor", "character", "factor", "integer", 
            "factor", "factor", "integer", "date", 
            "logical", "double", "double", "double"),
  description = c(
    "Latitude coordinates",
    "Longitude coordinates of the sighting location.",
    "Date when the sighting occurred.",
    "Scientific name of the species, 'undefined'",
    "Unique identifier for the taxon concept associated with the species.",
    "Unique identifier for each occurrence record.",
    "Name of the data resource or organization providing the data",
    "The 4-digit year of the event (when available)",
    "The 3-letter month abbreviation of the event (when available)",
    "The 3-letter weekday abbreviation of the event (when available)",
    "The hour of the event (when available)",
    "The date of the event (when available)",
    "Whether the observation was in Dryandra Woodland",
    "Precipitation on that day in Dryandra Woodland (when relevant), in millimeters",
    "Maximum temperature on that day in Dryandra Woodland (when relevant), in degrees Celsius",
    "Minimum temperature on that day in Dryandra Woodland (when relevant), in degrees Celsius"
  )
)

# Generate the table with your specified formatting
kbl(desc, table.attr = 'data-quarto-disable-processing="true"') |>
  kable_styling(full_width = FALSE) |>
  column_spec(1, width = "2cm", border_right = TRUE) |>
  column_spec(2, width = "2cm", border_right = TRUE) |>
  column_spec(3, width = "10cm")
```

 The data set has five types of variables which can be seen in below @fig-datatype :

```{r, data type}
#| label: fig-datatype
#| fig-cap: "Data Type"
#| warning: false
#| message: false
#| echo: false

numbats_clean <- na.omit(numbats)


visdat::vis_dat(numbats_clean
                )
```


-  The data was sourced from the Global Historical Climatology Network Daily (GHCND) using the ghcnd_stations() function. The dataset was filtered for Australian stations (ID starting with “ASN”) and records from 2020 onwards. Key variables such as precipitation (PRCP), maximum temperature (TMAX), and minimum temperature (TMIN) were selected. The data was processed by converting station names to lowercase and WMO IDs to numeric format. Only stations with complete data for all three elements were retained, ensuring the integrity and suitability of the dataset for analysis. For this dataset, I used the below code and named it aus_stations. The final dataset consists of 643 observations and 6 variables. The data dictionary is provided below in @tbl-stationsdataset :

```{r, echo=TRUE, message=FALSE, warning=FALSE}
aus_stations <- ghcnd_stations() |>
  filter(str_starts(id, "ASN")) |>
  filter(last_year >= 2020) |>
  mutate(wmo_id = as.numeric(wmo_id),
         name = str_to_lower(name)) |>
  select(-state, -gsn_flag) |>
  filter(element %in% c("PRCP", "TMAX", "TMIN")) |>
  nest(element: last_year) |>
  rowwise() |>
  filter(nrow(data) == 3) |>
  select(-data)
```


```{r}
#| label: tbl-stationsdataset
#| tbl-cap: "Data Dictionary For Australian Weather Stations dataset"
#| warning: false
#| message: false
#| echo: false

desc <- tibble(
  variable = c("id", "latitude", "longitude", "elevation", "name", "wmo_id"),
  class = c("character", "double", "double", "double", "character", "integer"),
  description = c(
    "Unique identifier for the weather station in Australia (GHCND).",
    "Latitude coordinates of the weather station (in decimal degrees).",
    "Longitude coordinates of the weather station (in decimal degrees).",
    "Elevation of the weather station above sea level (in meters).",
    "Name or location of the weather station.",
    "World Meteorological Organization station identifier."
  )
)

# Generate the table with your specified formatting
kbl(desc, table.attr = 'data-quarto-disable-processing="true"') |>
  kable_styling(full_width = FALSE) |>
  column_spec(1, width = "2cm", border_right = TRUE) |>
  column_spec(2, width = "2cm", border_right = TRUE) |>
  column_spec(3, width = "10cm")

```


-  The first step of the data cleaning process involved filtering out rows with missing values in the year column and retaining only records from the year 2000 onwards. This was accomplished using the filter() function with the conditions !is.na(year) to remove rows where the year is missing, and year >= 2000 to include only observations from the year 2000 and later. This ensures that the dataset is clean and focused on the relevant timeframe for analysis..

```{r, message=FALSE,warning=FALSE}
numbats_new <- numbats |> 
  filter(!is.na(year),
         year>=2000)  # remove the missing value

```


